{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\REACT\\\\reactnd-project-myreads-starter\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\REACT\\\\reactnd-project-myreads-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:\\\\REACT\\\\reactnd-project-myreads-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\REACT\\\\reactnd-project-myreads-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\REACT\\\\reactnd-project-myreads-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\REACT\\\\reactnd-project-myreads-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\REACT\\\\reactnd-project-myreads-starter\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\REACT\\\\reactnd-project-myreads-starter\\\\src\\\\App.js\";\nimport React from 'react';\nimport * as BooksAPI from './BooksAPI';\nimport './App.css';\nimport { Route, Redirect, withRouter, Link } from 'react-router-dom';\nimport SearchLibrary from './SearchLibrary';\nimport Shelf from './Shelf';\n\nvar BooksApp =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BooksApp, _React$Component);\n\n  function BooksApp() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, BooksApp);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BooksApp)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      books: [],\n      currentlyReading: [],\n      wantToRead: [],\n      read: []\n    };\n    _this.reRenderScreen =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return BooksAPI.getAll().then(function (response) {\n                return _this.setState({\n                  books: response\n                });\n              }).then(function () {\n                _this.state.books.forEach(function (book) {\n                  switch (book.shelf) {\n                    case 'currentlyReading':\n                      {\n                        _this.setState(function (currentState) {\n                          return {\n                            currentlyReading: currentState.currentlyReading.concat([book])\n                          };\n                        });\n                      }\n                      break;\n\n                    case 'wantToRead':\n                      {\n                        _this.setState(function (currentState) {\n                          return {\n                            wantToRead: currentState.wantToRead.concat([book])\n                          };\n                        });\n                      }\n                      break;\n\n                    case 'read':\n                      {\n                        _this.setState(function (currentState) {\n                          return {\n                            read: currentState.read.concat([book])\n                          };\n                        });\n                      }\n                      break;\n\n                    default:\n                  }\n                });\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.toUpdateShelf =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(book, shelf) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return BooksAPI.update(book, shelf).then(function () {\n                  book.shelf = shelf;\n\n                  _this.setState(function (currentState) {\n                    return {\n                      books: currentState.books.filter(function (b) {\n                        return b.id !== book.id;\n                      }).concat([book])\n                    };\n                  });\n\n                  _this.setState({\n                    currentlyReading: [],\n                    wantToRead: [],\n                    read: []\n                  });\n                }) // BooksAPI.getAll().then((respons)=>{this.setState({books:respons})})\n                // BooksAPI.getAll()\n                // .then((response)=>this.setState({books:response}))\n                .then(_this.reRenderScreen);\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x, _x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.removeAll = function (shelf) {\n      _this.setState({\n        shelf: []\n      });\n\n      _this.reRenderScreen();\n    };\n\n    return _this;\n  }\n\n  _createClass(BooksApp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.reRenderScreen();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"list-books\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"list-books-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"MyReads\")), React.createElement(\"div\", {\n        className: \"list-books-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(Shelf, {\n        shelf: this.state.currentlyReading,\n        currentShelf: 'currentlyReading',\n        name: 'Currently Reading',\n        onShelfUpdate: this.toUpdateShelf,\n        removeAll: this.removeAll,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), React.createElement(Shelf, {\n        shelf: this.state.wantToRead,\n        currentShelf: 'wantToRead',\n        name: 'Want To Read',\n        onShelfUpdate: this.toUpdateShelf,\n        removeAll: this.removeAll,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(Shelf, {\n        shelf: this.state.read,\n        currentShelf: 'read',\n        name: 'Read',\n        onShelfUpdate: this.toUpdateShelf,\n        removeAll: this.removeAll,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      })))), React.createElement(Link, {\n        to: \"/search\",\n        className: \"open-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Add a book\"))), React.createElement(Route, {\n        exact: true,\n        path: \"/search\",\n        render: function render() {\n          return React.createElement(SearchLibrary, {\n            books: _this2.state.books,\n            onShelfUpdate: _this2.toUpdateShelf,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 100\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return BooksApp;\n}(React.Component);\n\nexport default BooksApp; // export default withRouter(BooksApp)","map":{"version":3,"sources":["D:\\REACT\\reactnd-project-myreads-starter\\src\\App.js"],"names":["React","BooksAPI","Route","Redirect","withRouter","Link","SearchLibrary","Shelf","BooksApp","state","books","currentlyReading","wantToRead","read","reRenderScreen","getAll","then","response","setState","forEach","book","shelf","currentState","concat","toUpdateShelf","update","filter","b","id","removeAll","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport * as BooksAPI from './BooksAPI'\r\nimport './App.css'\r\nimport {Route, Redirect, withRouter, Link} from 'react-router-dom';\r\nimport SearchLibrary from './SearchLibrary';\r\nimport Shelf from './Shelf';\r\n\r\nclass BooksApp extends React.Component {\r\n  state = {\r\n    books: [],\r\n    currentlyReading: [],\r\n    wantToRead: [],\r\n    read: []\r\n  }\r\n  reRenderScreen=async ()=>\r\n  {\r\n    await BooksAPI.getAll()\r\n      .then((response)=>this.setState({books:response}))\r\n      .then(()=>{\r\n        this.state.books.forEach((book) => {\r\n          switch(book.shelf)\r\n          {\r\n            case 'currentlyReading': {this.setState(currentState => ({currentlyReading: currentState.currentlyReading.concat([book]) }))}\r\n                                      break;\r\n            case 'wantToRead': {this.setState(currentState => ({wantToRead: currentState.wantToRead.concat([book]) }))}\r\n                                      break;    \r\n            case 'read': {this.setState(currentState => ({read: currentState.read.concat([book]) }))}\r\n                                      break;    \r\n            default:               \r\n          }\r\n        })\r\n      })\r\n      // .then(()=>console.log(this.state.currentlyReading))\r\n  }\r\n\r\n  componentDidMount()\r\n  {\r\n    this.reRenderScreen();\r\n  }\r\n\r\n  \r\n  toUpdateShelf=async (book, shelf)=>\r\n  {\r\n    // let bookToBeUpdated=this.state.books.filter(book=>\r\n    //   book.id===book.id? book.shelf=shelf: '')\r\n    // let index=this.state.books.indexOf(bookToBeUpdated)\r\n    // let updatedBooks=this.state.books.splice(index, 0, bookToBeUpdated)\r\n    // this.setState({books: updatedBooks})\r\n    // console.log(this.state.books)\r\n\r\n    await BooksAPI.update(book, shelf)\r\n    .then(()=>{\r\n      book.shelf = shelf;\r\n      this.setState(currentState => ({\r\n        books: currentState.books.filter(b => b.id !== book.id).concat([book])\r\n      }));\r\n      this.setState({\r\n        currentlyReading: [],\r\n        wantToRead: [],\r\n        read: []\r\n        })\r\n      \r\n    })\r\n    // BooksAPI.getAll().then((respons)=>{this.setState({books:respons})})\r\n    // BooksAPI.getAll()\r\n      // .then((response)=>this.setState({books:response}))\r\n    .then(this.reRenderScreen)\r\n  }\r\n\r\n  removeAll=(shelf)=>\r\n  {\r\n    this.setState({shelf: []})\r\n    this.reRenderScreen()\r\n  }\r\n\r\n  render() \r\n  {\r\n      return (\r\n      <div className=\"app\">\r\n        <Route exact path='/'>\r\n            <div className=\"list-books\">\r\n              <div className=\"list-books-title\">\r\n                <h1>MyReads</h1>\r\n              </div>\r\n              <div className=\"list-books-content\">\r\n                <div>                 \r\n                    <Shelf shelf={this.state.currentlyReading} currentShelf={'currentlyReading'} name={'Currently Reading'} onShelfUpdate={this.toUpdateShelf} removeAll={this.removeAll}/>\r\n                    <Shelf shelf={this.state.wantToRead} currentShelf={'wantToRead'} name={'Want To Read'} onShelfUpdate={this.toUpdateShelf} removeAll={this.removeAll}/>\r\n                    <Shelf shelf={this.state.read} currentShelf={'read'} name={'Read'} onShelfUpdate={this.toUpdateShelf} removeAll={this.removeAll}/>\r\n                  {/* {this.state.books!==undefined && \r\n                      console.log(this.state.books)\r\n                    } */}\r\n                </div>\r\n              </div>            \r\n            </div>  \r\n            <Link to='/search' className=\"open-search\">\r\n              <button>Add a book</button>\r\n            </Link>            \r\n          </Route>\r\n          <Route exact path='/search' render={()=><SearchLibrary books={this.state.books} onShelfUpdate={this.toUpdateShelf}/>}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default BooksApp\r\n// export default withRouter(BooksApp)"]},"metadata":{},"sourceType":"module"}